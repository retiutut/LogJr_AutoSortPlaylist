'use strict';Object.defineProperty(exports,'__esModule',{value:!0});function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}/* eslint-disable no-console */var csvFilePath='/Users/Richard/Documents/GitHub/LogJr_AutoSortPlaylist/playlist_databases/^^**The Lost World.csv',csv=require('csvtojson'),dirTree=require('directory-tree'),mm=require('music-metadata'),util=require('util'),csvToJson=function(){return csv().fromFile(csvFilePath)},directoryToJson=function(){return dirTree('/Users/Richard/Documents/GitHub/LogJr_AutoSortPlaylist/playlist_databases',{extensions:/\.(mp3|wav|aiff|wma|flac)$/})},getMetaData=function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d,e;return regeneratorRuntime.wrap(function(a){var f=Math.floor;for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,mm.parseFile(b);case 3:return c=a.sent,d=c.common,e=c.format,a.abrupt('return',{title:d.title,artist:d.artist,album:d.album,year:d.year,duration:f(e.duration)});case 9:return a.prev=9,a.t0=a['catch'](0),a.abrupt('return',{});case 12:case'end':return a.stop();}},a,void 0,[[0,9]])}));return function(){return a.apply(this,arguments)}}(),mapToJson=function(){return Promise.all(directoryToJson().children.map(function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=b.path,a.t1=b.name,a.next=4,getMetaData(b.path);case 4:return a.t2=a.sent,a.next=7,csvToJson();case 7:return a.t3=a.sent,a.abrupt('return',{path:a.t0,name:a.t1,metadata:a.t2,mixedinkey:a.t3});case 9:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}()))},inspectJSON=function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt('return',util.inspect(b,{showHidden:!1,depth:null,colors:!0}));case 1:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}();// General functions in alphabetical order
// Todo: Organize into separate files, if necessary
// eslint-disable-next-line max-len
exports.csvToJson=csvToJson,exports.directoryToJson=directoryToJson,exports.mapToJson=mapToJson,exports.inspectJSON=inspectJSON;